\documentclass[a4paper,12pt]{exam}

\usepackage[top=1in, bottom=1in, left=0.75in, right=0.75in]{geometry}
%tlmgr install mathpazo
%tlmgr install setspace
%tlmgr install collection-fontsrecommended
\usepackage{mathpazo}
% \usepackage[T1]{fontenc}
% \usepackage[ansinew]{inputenc} % produces error when used with xelatex
\usepackage[singlespacing]{setspace}
\usepackage{graphicx}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage[ddmmyyyy]{datetime}
\usepackage{environ}
\usepackage[normalem]{ulem}
\usepackage{etoolbox}

% % uncomment this to format exactly as question paper of exams
% \title{\vspace{-1.5cm}
%   {\huge \textbf{General Knowledge: QnA and Subjective}}\\[3mm]
%   {\LARGE Practice}\\[3mm]
%   {\LARGE All topics}\\[1mm]
%   \normalsize
%   \begin{tabular}{lll}
%       Name: ~\rule{3cm}{1pt} & Roll no.:~\rule{2cm}{1pt} & Date:~\rule{2cm}{1pt} \\[2mm]
%       Full Marks: yy & & Time: x hours \\
%   \end{tabular}
%   \hrule
% }

% comment 'title' when combining with main book as a part or avoid including first page
\title{\vspace{-1.5cm}{\huge \textbf{General Knowledge: A Comprehensive Guide}}\\[2mm]
\hrule
}
\date{}

% print correct answers and fillins

\printanswers
\CorrectChoiceEmphasis{\bfseries\boldmath}

% print marks weight in the right
\pointsinrightmargin
\bracketedpoints

% adding gradetable
\addpoints

% the \llap command to correct alignment in a question with parts.
\renewcommand{\questionlabel}{\llap{Q}\,\thequestion.}
\unframedsolutions % put solution inside a box

\pagestyle{empty} % turn off page number, this is useful when binding the pdf to knitted document

%% following code is solution to aligning multiple choices in single line and
%% displaying answers in line after dotted marks
%% copied from: https://tex.stackexchange.com/a/141643

\newlength\answerspace
\setlength\answerspace{0.5in}
\newcommand\dottedanswerline[1][{}]{%
  % One optional argument, the default value of which is empty.
  \unskip\linebreak[0]\enspace
  \hbox{}\nobreak\dotfill
  \ifprintanswers
    \hbox to \answerspace{(\hfil#1\hfil)}%
  \else
    \hbox{(\hskip 0.5in)}%
  \fi
}% dottedanswerline

\makeatletter
\newlength\choiceitemwidth
\newif\ifshowsolution \showsolutiontrue
\newcounter{choiceitem}%

\def\thechoiceitem{\Alph{choiceitem}}%

\def\makechoicelabel#1{#1\uline{\thechoiceitem.}\else\thechoiceitem.\fi\space} %underline the answer item label if we want to print the answer

\def\choice@mesureitem#1{\cr\stepcounter{choiceitem}\makechoicelabel#1}%

%measure the choices, this is the first time we need to parse the \BODY
\def\choicemesureitem{\@ifstar
  {\choice@mesureitem\ifprintanswers \xappto\theanswer{\thechoiceitem}\ignorespaces}%
  {\choice@mesureitem\iffalse}}%

\def\choice@blockitem#1{%
  \ifnum\value{choiceitem}>0\hfill\fi
  \egroup\hskip0pt
  \hbox to \choiceitemwidth\bgroup\hss\refstepcounter{choiceitem}\makechoicelabel#1}

\def\choiceblockitem{\@ifstar
  {\choice@blockitem\ifprintanswers\ignorespaces}%
  {\choice@blockitem\iffalse}}

\def\choice@paraitem#1{%
  \par\refstepcounter{choiceitem}\makechoicelabel#1}

\def\choiceparaitem{\@ifstar
  {\choice@paraitem\ifprintanswers\ignorespaces}%
  {\choice@paraitem\iffalse}}


\NewEnviron{items}{%
  \def\theanswer{}
  \begingroup
    \let\item\choicemesureitem
    \setcounter{choiceitem}{0}%
    \settowidth{\global\choiceitemwidth}{\vbox{\halign{##\hfil\cr\BODY\crcr}}}%
  \endgroup
  % \dottedanswerline[\theanswer] % comment this line to display underline for in \printanswers mode, uncommenting this will also show correct answer printed on the side of question following a dotted line.
  \trivlist\item\relax
  \parindent0pt
  \setcounter{choiceitem}{0}%
  \ifdim\choiceitemwidth<0.25\columnwidth
    \choiceitemwidth=0.25\columnwidth
    \let\item\choiceblockitem
    \bgroup\BODY\hfill\egroup
  \else\ifdim\choiceitemwidth<0.5\columnwidth
    \choiceitemwidth=0.5\columnwidth
    \let\item\choiceblockitem
    \bgroup\BODY\hfill\egroup
  \else % \choiceitemwidth > 0.5\columnwidth
    \let\item\choiceparaitem
    \BODY
  \fi\fi
  \endtrivlist
}
\makeatother

\begin{document}

\maketitle

% \vspace{-3cm}

% % uncomment this to set instructions for answering the questions
% \section*{Instructions}
%
% \begin{enumerate}
%   \item All questions are compulsory
%   \item Calculator is not allowed
%   \item All questions carry equal marks.
%
% \end{enumerate}
% \hrule \vspace{5mm}

% \gradetable

\include{general-knowledge-objectives1}

\end{document}
